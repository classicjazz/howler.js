/*!
 * Package: @classicjazz/howler.js
 * Version: 2.5.0
 *
 * (c) 2026 Michael Connelly
 * MIT License | https://github.com/classicjazz/howler.js
 *
 * Forked from howler.js v2.2.4
 * (c) 2013-2020 James Simpson of GoldFire Studios
 * MIT License | https://github.com/goldfire/howler.js
 *
 */(function(){"use strict";var k=100,l=new Map;function u(e,t){l.has(e)?l.delete(e):l.size>=k&&l.delete(l.keys().next().value),l.set(e,t)}function _(e){if(l.has(e)){var t=l.get(e);return l.delete(e),l.set(e,t),t}}function v(e){l.delete(e)}function f(e){for(var t=1;t<arguments.length;t++){var n=e.canPlayType(arguments[t]).replace(/^no$/,"");if(n)return!0}return!1}var m=function(){this.init()};m.prototype={init:function(){var e=this||a;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.autoSuspendDelay=3e4,e.ctx=null,e.autoUnlock=!0,e.autoReroute=!1,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||x(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||x(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},stop:function(){for(var e=this||a,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,x()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var t=new Audio;typeof t.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t=typeof Audio<"u"?new Audio:null}catch{return e}if(!t||typeof t.canPlayType!="function")return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,"");return e._codecs={mp3:!!(n||t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:f(t,'audio/wav; codecs="1"',"audio/wav"),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:f(t,"audio/x-m4a;","audio/m4a;","audio/aac;"),m4b:f(t,"audio/x-m4b;","audio/m4b;","audio/aac;"),mp4:f(t,"audio/x-mp4;","audio/mp4;","audio/aac;"),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:f(t,"audio/x-flac;","audio/flac;")},e},_unlockAudio:function(){var e=this||a;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1;var t=e._howls.length>0&&e._howls.every(function(r){return r._html5});!e._mobileUnloaded&&!t&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(){var r=e._howls.some(function(g){return!g._stream});if(r)for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch{e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var s=e._howls[i]._getSoundIds(),d=0;d<s.length;d++){var c=e._howls[i]._soundById(s[d]);c&&c._node&&!c._node._unlocked&&(c._node._unlocked=!0,c._node.load())}e._autoResume();var h=e.ctx.createBufferSource();h.buffer=e._scratchBuffer,h.connect(e.ctx.destination),h.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),h.onended=function(){h.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("pointerdown",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var g=0;g<e._howls.length;g++)e._howls[g]._emit("unlock")}};return document.addEventListener("pointerdown",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||a;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio,n=t.play();return n instanceof Promise&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),t},_releaseHtml5Audio:function(e){var t=this||a;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!a.usingWebAudio)return e;for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var r=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(r,r)}},e.autoSuspendDelay),e},_autoResume:function(){var e=this;return!e.ctx||typeof e.ctx.resume>"u"||!a.usingWebAudio||e.ctx.state==="closed"||(e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0)),e},setSinkId:function(e){var t=this;return!t.ctx||typeof t.ctx.setSinkId!="function"?Promise.resolve():t.ctx.setSinkId(e).then(function(){t._sinkId=e})}};var a=new m,p=function(e){if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}this.init(e)};p.prototype={init:function(e){var t=this;if(a.ctx||x(),t._autoplay=e.autoplay||!1,t._format=typeof e.format!="string"?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload=typeof e.preload!="boolean"&&e.preload!=="metadata"?!0:e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src=typeof e.src!="string"?e.src:[e.src],t._srcList=typeof e.src!="string"?e.src.slice():[e.src],t._volume=e.volume!==void 0?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},t._stream=null,e.stream!==void 0&&e.stream!==null&&e.stream!==!1){var n=typeof e.stream=="object"?e.stream:{};t._stream={staleTimeout:n.staleTimeout||4e3,maxRetryDelay:n.maxRetryDelay||3e4,maxRetries:n.maxRetries!==void 0?n.maxRetries:1/0,flushInterval:n.flushInterval||72e5,sourceFailThreshold:n.sourceFailThreshold!==void 0?n.sourceFailThreshold:3,onStall:typeof n.onStall=="function"?n.onStall:null,onRecover:typeof n.onRecover=="function"?n.onRecover:null,onPreviousTrack:typeof n.onPreviousTrack=="function"?n.onPreviousTrack:null,onNextTrack:typeof n.onNextTrack=="function"?n.onNextTrack:null,workletUrl:n.workletUrl||null,onWorkletMessage:typeof n.onWorkletMessage=="function"?n.onWorkletMessage:null,_retryDelay:1e3,_retryCount:0,_srcIndex:0,_srcFailCount:0,_staleTimer:null,_healthTimer:null,_reconnecting:!1,_flushTimer:null,_networkHandler:null,_visibilityHandler:null,_playHandler:null,_pauseHandler:null,_stopHandler:null,_loaderrorHandler:null,_unlockHandler:null,_onlineHandler:null,_offlineHandler:null,_lastEffectiveType:null,_lastRtt:null,_offline:!1,_rampInterval:null},t._html5=!0,t._webAudio=!1,e.autoplay&&console.warn("Howler [stream]: autoplay:true on a stream Howl may be blocked by the browser Autoplay Policy. Call howl.play() from a user gesture (click, touchend, keydown) instead. See: https://developer.chrome.com/blog/autoplay/")}return t._duration=0,t._state="unloaded",t._sounds=[],t._soundMap=new Map,t._endTimers={},t._queue=[],t._playLock=!1,t._fetchControllers={},t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,typeof a.ctx<"u"&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t._preload!=="none"&&t.load(),t._stream&&t._initStreamMode(),t},mediaSession:function(e){if(typeof navigator>"u"||!("mediaSession"in navigator)||!navigator.mediaSession)return this;e=e||{};var t=function(o,i){return typeof o=="string"?o.slice(0,i||500):""},n=/^https?:\/\//i,r=[];Array.isArray(e.artwork)&&(r=e.artwork.map(function(o){var i=t(o.src,2e3);return n.test(i)?{src:i,sizes:t(o.sizes,20),type:t(o.type,50)}:null}).filter(Boolean));try{navigator.mediaSession.metadata=new MediaMetadata({title:t(e.title)||"Live Radio",artist:t(e.artist)||"",album:t(e.album)||"",artwork:r})}catch{}return this},_initStreamMode:function(){var e=this,t=e._stream;R(e),typeof document<"u"&&!t._visibilityHandler&&(t._visibilityHandler=function(){if(document.visibilityState==="visible"){a.ctx&&a.ctx.state!=="closed"&&a.ctx.state!=="running"&&a._autoResume();var n=e._sounds[0];n&&n._node&&n._node.paused&&!n._paused&&n._node.play().catch(function(){})}},document.addEventListener("visibilitychange",t._visibilityHandler,!1)),typeof navigator<"u"&&navigator.connection&&typeof navigator.connection.addEventListener=="function"&&!t._networkHandler&&(t._networkHandler=function(){var n=navigator.connection,r=t._lastEffectiveType,o=t._lastRtt;t._lastEffectiveType=n.effectiveType||null,t._lastRtt=n.rtt||null;var i=r&&r!==t._lastEffectiveType,s=o&&t._lastRtt&&t._lastRtt-o>500;(i||s)&&e.playing()&&e._streamSilentReconnect(!1)},navigator.connection&&(t._lastEffectiveType=navigator.connection.effectiveType||null,t._lastRtt=navigator.connection.rtt||null),navigator.connection.addEventListener("change",t._networkHandler)),e._scheduleFlushReconnect(),t._playHandler=function(){a.autoSuspend=!1,a.ctx&&a.ctx.state==="suspended"&&a.ctx.resume(),typeof navigator<"u"&&navigator.mediaSession&&(navigator.mediaSession.playbackState="playing");try{navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:1/0,playbackRate:1,position:0})}catch{}e._cancelFlushTimer(),e._scheduleFlushReconnect()},e.on("play",t._playHandler),t._pauseHandler=function(){a.autoSuspend=!0,a.autoSuspendDelay=6e4,typeof navigator<"u"&&navigator.mediaSession&&(navigator.mediaSession.playbackState="paused"),e._cancelStaleTimer(),e._cancelFlushTimer(),e._scheduleFlushReconnect()},e.on("pause",t._pauseHandler),t._stopHandler=function(){a.autoSuspend=!0,typeof navigator<"u"&&navigator.mediaSession&&(navigator.mediaSession.playbackState="none"),e._cancelStaleTimer(),e._cancelFlushTimer()},e.on("stop",t._stopHandler),t._loaderrorHandler=function(n,r){typeof navigator<"u"&&navigator.mediaSession&&(navigator.mediaSession.playbackState="none"),e._stream&&t._retryCount<=t.maxRetries&&e._streamReconnect()},e.on("loaderror",t._loaderrorHandler),t._unlockHandler=function(){e._stream&&!e.playing()&&e._state==="loaded"&&e.play()},e.once("unlock",t._unlockHandler),typeof window<"u"&&(t._offlineHandler=function(){t._offline=!0,e._cancelStaleTimer(),clearTimeout(t._healthTimer)},t._onlineHandler=function(){t._offline&&(t._offline=!1,e.playing()&&e._streamSilentReconnect(!1))},window.addEventListener("offline",t._offlineHandler,!1),window.addEventListener("online",t._onlineHandler,!1))},_attachStreamNodeListeners:function(e){var t=this,n=t._stream;e.addEventListener("stalled",function(){t._scheduleStaleTimer(),n.onStall&&n.onStall()},!1),e.addEventListener("waiting",function(){t._scheduleStaleTimer()},!1),e.addEventListener("playing",function(){t._cancelStaleTimer(),n._reconnecting=!1,typeof navigator<"u"&&navigator.mediaSession&&(navigator.mediaSession.playbackState="playing"),clearTimeout(n._healthTimer),n._healthTimer=setTimeout(function(){n._retryDelay=1e3,n._retryCount=0,n._srcFailCount=0,n.onRecover&&n.onRecover()},n.staleTimeout*2)},!1),"preservesPitch"in e&&(e.preservesPitch=!1)},_scheduleStaleTimer:function(){var e=this,t=e._stream;t._staleTimer||t._offline||(t._staleTimer=setTimeout(function(){t._staleTimer=null,t._reconnecting||e._streamReconnect()},t.staleTimeout))},_cancelStaleTimer:function(){var e=this._stream;e&&e._staleTimer&&(clearTimeout(e._staleTimer),e._staleTimer=null)},_scheduleFlushReconnect:function(){var e=this,t=e._stream;!t||!t.flushInterval||(e._cancelFlushTimer(),t._flushTimer=setTimeout(function(){t._flushTimer=null,e._stream&&(e.playing()&&e._streamSilentReconnect(!0),e._scheduleFlushReconnect())},t.flushInterval))},_cancelFlushTimer:function(){var e=this._stream;e&&e._flushTimer&&(clearTimeout(e._flushTimer),e._flushTimer=null)},_streamSilentReconnect:function(e){var t=this,n=t._sounds[0];if(!(!n||!n._node)){var r=n._node,o=t._stream,i=typeof t._src=="string"?t._src:t._src[0],s=i+(i.indexOf("?")>=0?"&":"?")+"_t="+Date.now(),d=r.volume;L(o,r,d,0,40,function(){r.src=s,r.load();var c=r.play();c instanceof Promise?c.then(function(){L(o,r,0,d,40,null)}).catch(function(){r.volume=d,t._stream&&(t._emit("playerror",null,"Stream silent reconnect was blocked by autoplay policy. Call play() from a user gesture."),setTimeout(function(){t._stream&&t._streamReconnect()},500))}):r.volume=d})}},_streamReconnect:function(){var e=this,t=e._stream;if(!t._reconnecting){if(t._retryCount++,t._retryCount>t.maxRetries){e._emit("loaderror",null,"Stream: maximum reconnect attempts ("+t.maxRetries+") reached.");return}t._srcFailCount++,t._srcFailCount>=t.sourceFailThreshold&&e._srcList&&e._srcList.length>1&&(t._srcIndex=(t._srcIndex+1)%e._srcList.length,t._srcFailCount=0,t._retryCount=0,t._retryDelay=1e3,e._src=e._srcList[t._srcIndex],console.warn("Howler [stream]: rotating to source "+e._src)),t._reconnecting=!0,e._cancelStaleTimer(),clearTimeout(t._healthTimer);var n=t._retryDelay+Math.random()*1e3;t._retryDelay=Math.min(t._retryDelay*2,t.maxRetryDelay),setTimeout(function(){if(e._stream){for(var r=Object.keys(e._endTimers),o=0;o<r.length;o++)e._clearTimer(parseInt(r[o],10));e._queue=[],e._state="unloaded",e.load(),e.play()}},n)}},load:function(){var e=this,t=null;if(a.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var r,o;if(e._format&&e._format[n])r=e._format[n];else{if(typeof e._src[n]!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}o=e._src[n],r=/^data:audio\/([^;,]+);/i.exec(o),r||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&a.codecs(r)){t=e._src[n];break}}if(!t){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=t,e._state="loading",window.location.protocol==="https:"&&t.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),e._stream&&e._webAudio&&(console.warn("Howler [stream]: forcing html5:true \u2014 the WebAudio fetch path is incompatible with infinite HTTP streams and would deadlock the tab."),e._html5=!0,e._webAudio=!1),new y(e),e._webAudio&&A(e),e},play:function(e,t){var n=this,r=null;if(typeof e=="number")r=e,e=null;else{if(typeof e=="string"&&n._state==="loaded"&&!n._sprite[e])return null;if(typeof e>"u"&&(e="__default",!n._playLock)){for(var o=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(o++,r=n._sounds[i]._id);o===1?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),n._state!=="loaded"){s._sprite=e,s._ended=!1;var d=s._id;return n._queue.push({event:"play",action:function(){n.play(d)}}),d}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&a._autoResume();var c=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),h=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-c),g=h*1e3/Math.abs(s._rate),w=n._sprite[e][0]/1e3,b=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var S=function(){s._paused=!1,s._seek=c,s._start=w,s._stop=b,s._loop=!!(s._loop||n._sprite[e][2])};if(c>=b){n._ended(s);return}var T=s._node;if(n._webAudio){var H=function(){n._playLock=!1,S(),n._refreshBuffer(s);var I=s._muted||n._muted?0:s._volume;T.gain.setValueAtTime(I,a.ctx.currentTime),s._playStart=a.ctx.currentTime,s._loop?T.bufferSource.start(0,c,86400):T.bufferSource.start(0,c,h),g!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),g)),t||queueMicrotask(function(){n._emit("play",s._id),n._loadQueue()})};a.state==="running"&&a.ctx.state!=="interrupted"?H():(n._playLock=!0,n.once("resume",H),n._clearTimer(s._id))}else{var E=function(){T.currentTime=c,T.muted=s._muted||n._muted||a._muted||T.muted,T.volume=s._volume*a.volume(),T.playbackRate=s._rate;try{var I=T.play();if(I instanceof Promise?(n._playLock=!0,S(),I.then(function(){n._playLock=!1,T._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(n._playLock=!1,S(),n._emit("play",s._id)),T.playbackRate=s._rate,T.paused){n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),g):(n._endTimers[s._id]=function(){n._ended(s),T.removeEventListener("ended",n._endTimers[s._id],!1)},T.addEventListener("ended",n._endTimers[s._id],!1))}catch(B){n._emit("playerror",s._id,B)}},O=T.readyState>=3;if(O)E();else{n._playLock=!0,n._state="loading";var D=function(){n._state="loaded",E(),T.removeEventListener(a._canPlayEvent,D,!1)};T.addEventListener(a._canPlayEvent,D,!1),n._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else(!isNaN(o._node.duration)||o._node.duration===1/0)&&o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):(!isNaN(i._node.duration)||i._node.duration===1/0)&&(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&(i._loadFn&&(i._node.removeEventListener(a._canPlayEvent,i._loadFn,!1),i._loadFn=null),n._clearSound(i._node)))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(typeof t>"u")if(typeof e=="boolean")n._muted=e;else return n._muted;for(var r=n._getSoundIds(t),o=0;o<r.length;o++){var i=n._soundById(r[o]);i&&(i._muted=e,i._interval&&n._stopFade(i._id),n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,a.ctx.currentTime):i._node&&(i._node.muted=a._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e=this,t=arguments,n,r;if(t.length===0)return e._volume;t.length===1||t.length===2&&typeof t[1]>"u"?e._getSoundIds().indexOf(t[0])>=0?r=parseInt(t[0],10):n=parseFloat(t[0]):t.length>=2&&(n=parseFloat(t[0]),r=parseInt(t[1],10));var o;if(typeof n>"u"||n<0||n>1)return o=r?e._soundById(r):e._sounds[0],o?o._volume:0;if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;typeof r>"u"&&(e._volume=n);for(var i=e._getSoundIds(r),s=0;s<i.length;s++)o=e._soundById(i[s]),o&&(o._volume=n,t[2]||e._stopFade(i[s]),e._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(n,a.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=n*a.volume()),e._emit("volume",o._id));return e},fade:function(e,t,n,r){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,n,r)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),o.volume(e,r);for(var i=o._getSoundIds(r),s=0;s<i.length;s++){var d=o._soundById(i[s]);if(d){if(r||o._stopFade(i[s]),o._webAudio&&!d._muted){var c=a.ctx.currentTime,h=c+n/1e3;d._volume=e,d._node.gain.setValueAtTime(e,c),d._node.gain.linearRampToValueAtTime(t,h)}o._startFadeInterval(d,e,t,n,i[s],typeof r>"u")}}return o},_startFadeInterval:function(e,t,n,r,o,i){var s=this,d=t,c=n-t,h=Math.abs(c/.01),g=Math.max(4,h>0?r/h:r),w=performance.now(),b=!1;e._fadeTo=n,e._fadeDone=!1;var S=function(T){if(!b){var H=Math.min(T-w,100);if(w=T,d+=c*(H/r),d=Math.round(d*100)/100,d=c<0?Math.max(n,d):Math.min(n,d),s._webAudio?e._volume=d:s.volume(d,e._id,!0),i&&(s._volume=d),n<t&&d<=n||n>t&&d>=n){b=!0,e._fadeDone=!0,e._interval=null,e._intervalType=null,e._fadeTo=null,s.volume(n,e._id),s._emit("fade",e._id);return}e._interval=requestAnimationFrame(S),e._intervalType="raf"}};e._intervalType="timeout",e._interval=setTimeout(function(){w=performance.now(),e._intervalType="raf",e._interval=requestAnimationFrame(S)},g)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(a.ctx.currentTime),n._intervalType==="raf"?cancelAnimationFrame(n._interval):clearTimeout(n._interval),n._interval=null,n._intervalType=null,n._fadeDone?n._fadeDone=null:(t.volume(n._fadeTo,e),n._fadeTo=null,n._fadeDone=null,t._emit("fade",e))),t},loop:function(){var e=this,t=arguments,n,r,o;if(t.length===0)return e._loop;if(t.length===1)if(typeof t[0]=="boolean")n=t[0],e._loop=n;else return o=e._soundById(parseInt(t[0],10)),!!(o&&o._loop);else t.length===2&&(n=t[0],r=parseInt(t[1],10));for(var i=e._getSoundIds(r),s=0;s<i.length;s++)o=e._soundById(i[s]),o&&(o._loop=n,e._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=n,n&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop,e.playing(i[s])&&(e.pause(i[s],!0),e.play(i[s],!0)))));return e},rate:function(){var e=this,t=arguments,n,r;if(t.length===0)r=e._sounds[0]._id;else if(t.length===1){var o=e._getSoundIds();o.indexOf(t[0])>=0?r=parseInt(t[0],10):n=parseFloat(t[0])}else t.length===2&&(n=parseFloat(t[0]),r=parseInt(t[1],10));if(typeof n!="number"){var i=e._soundById(r);return i?i._rate:e._rate}if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;typeof r>"u"&&(e._rate=n);for(var s=e._getSoundIds(r),d=0;d<s.length;d++){var i=e._soundById(s[d]);if(i){e.playing(s[d])&&(i._rateSeek=e.seek(s[d]),i._playStart=e._webAudio?a.ctx.currentTime:i._playStart),i._rate=n,e._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(n,a.ctx.currentTime):i._node&&(i._node.playbackRate=n);var c=e.seek(s[d]),h=(e._sprite[i._sprite][0]+e._sprite[i._sprite][1])/1e3-c,g=h*1e3/Math.abs(i._rate);(e._endTimers[s[d]]||!i._paused)&&(e._clearTimer(s[d]),e._endTimers[s[d]]=setTimeout(e._ended.bind(e,i),g)),e._emit("rate",i._id)}}return e},seek:function(){var e=this,t=arguments,n,r;if(t.length===0)e._sounds.length&&(r=e._sounds[0]._id);else if(t.length===1){var o=e._getSoundIds();o.indexOf(t[0])>=0?r=parseInt(t[0],10):e._sounds.length&&(r=e._sounds[0]._id,n=parseFloat(t[0]))}else t.length===2&&(n=parseFloat(t[0]),r=parseInt(t[1],10));if(typeof r>"u")return 0;if(typeof n=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var i=e._soundById(r);if(!i)return e;if(typeof n!="number"||n<0){if(e._webAudio){var s=e.playing(r),d=s?a.ctx.currentTime-i._playStart:0,c=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(c+d*Math.abs(i._rate))}return i._node.currentTime}var h=e.playing(r);h&&e.pause(r,!0),i._seek=n,i._ended=!1,e._clearTimer(r),!e._webAudio&&i._node&&!isNaN(i._node.duration)&&(i._node.currentTime=n);var g=function(){h&&e.play(r,!0),e._emit("seek",r)};if(h&&!e._webAudio){var w=function(b){e._playLock?b?setTimeout(function(){w(!0)},0):queueMicrotask(function(){w(!0)}):g()};queueMicrotask(function(){w(!1)})}else g();return e},playing:function(e){var t=this;if(typeof e=="number"){var n=t._soundById(e);return!!(n&&!n._paused)}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){var e=this;if(Object.keys(e._fetchControllers).forEach(function(d){e._fetchControllers[d].abort()}),e._fetchControllers={},e._stream){e._cancelStaleTimer(),e._cancelFlushTimer();var t=e._stream;if(clearTimeout(t._healthTimer),t._healthTimer=null,t._networkHandler&&typeof navigator<"u"&&navigator.connection&&typeof navigator.connection.removeEventListener=="function"&&(navigator.connection.removeEventListener("change",t._networkHandler),t._networkHandler=null),t._visibilityHandler&&typeof document<"u"&&(document.removeEventListener("visibilitychange",t._visibilityHandler,!1),t._visibilityHandler=null),t._playHandler&&(e.off("play",t._playHandler),t._playHandler=null),t._pauseHandler&&(e.off("pause",t._pauseHandler),t._pauseHandler=null),t._stopHandler&&(e.off("stop",t._stopHandler),t._stopHandler=null),t._loaderrorHandler&&(e.off("loaderror",t._loaderrorHandler),t._loaderrorHandler=null),t._unlockHandler&&(e.off("unlock",t._unlockHandler),t._unlockHandler=null),t._offlineHandler&&typeof window<"u"&&(window.removeEventListener("offline",t._offlineHandler,!1),t._offlineHandler=null),t._onlineHandler&&typeof window<"u"&&(window.removeEventListener("online",t._onlineHandler,!1),t._onlineHandler=null),t._workletSource){try{t._workletSource.disconnect()}catch{}t._workletSource=null}if(t._workletNode){try{t._workletNode.disconnect()}catch{}if(t._workletNode.port&&typeof t._workletNode.port.close=="function")try{t._workletNode.port.close()}catch{}t._workletNode=null}if(t._rampInterval&&(clearInterval(t._rampInterval),t._rampInterval=null),typeof navigator<"u"&&navigator.mediaSession){try{navigator.mediaSession.metadata=null}catch{}try{navigator.mediaSession.playbackState="none"}catch{}}e._stream=null,a.autoSuspend=!0}for(var n=e._sounds,r=0;r<n.length;r++)n[r]._paused||e.stop(n[r]._id),e._webAudio||(e._clearSound(n[r]._node),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(a._canPlayEvent,n[r]._loadFn,!1),n[r]._node.removeEventListener("ended",n[r]._endFn,!1),a._releaseHtml5Audio(n[r]._node)),n[r]._parent=null,delete n[r]._node,e._clearTimer(n[r]._id);var o=a._howls.indexOf(e);o>=0&&a._howls.splice(o,1);for(var i=!0,s=0;s<a._howls.length;s++)if(a._howls[s]._src===e._src||Array.isArray(e._src)&&e._src.indexOf(a._howls[s]._src)>=0){i=!1;break}return i&&v(e._src),a.noAudio=!1,e._state="unloaded",e._sounds=[],e._soundMap=new Map,null},on:function(e,t,n,r){var o=this,i=o["_on"+e];return typeof t=="function"&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),o},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if(typeof t=="number"&&(n=t,t=null),t||n){for(i=0;i<o.length;i++)if(t===o[i].fn&&n===o[i].id||!t&&n===o[i].id){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var s=Object.keys(r);for(i=0;i<s.length;i++)s[i].indexOf("_on")===0&&Array.isArray(r[s[i]])&&(r[s[i]]=[])}return r},once:function(e,t,n){var r=this;return r.on(e,t,n,1),r},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],i={play:1,pause:1,stop:1,end:1,seek:1,load:1},s=typeof scheduler<"u"&&typeof scheduler.postTask=="function",d=s?function(h,g){var w=i[g]?"user-blocking":"background";scheduler.postTask(h,{priority:w})}:function(h){queueMicrotask(h)},c=o.length-1;c>=0;c--)(!o[c].id||o[c].id===t||e==="load")&&((function(h,g){d(function(){h.call(r,t,n)},g)})(o[c].fn,e),o[c].once&&r.off(e,o[c].fn,o[c].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length===0)return t;var n=t._queue[0];return e?n.event===e&&(t._queue.shift(),t._loadQueue()):n.action(),t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!!(e._loop||t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var o=(e._stop-e._start)*1e3/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),a._autoSuspend()),!t._webAudio&&!r&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if(typeof t._endTimers[e]!="function")clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){return this._soundMap.get(e)||null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new y(e)},_drain:function(){var e=this,t=e._pool,n=0;if(!(e._sounds.length<t)){for(var r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(var o=e._sounds.length-1;o>=0&&!(n<=t);o--)e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._soundMap.delete(e._sounds[o]._id),e._sounds.splice(o,1),n--)}},_getSoundIds:function(e){return typeof e>"u"?this._sounds.map(function(t){return t._id}):[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=_(t._src),e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,a.ctx.currentTime),t},_cleanBuffer:function(e){if(!e.bufferSource)return this;if(a._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null,e.bufferSource.disconnect(0);var t=!!(a._navigator&&a._navigator.vendor&&a._navigator.vendor.indexOf("Apple")>=0);if(t)try{e.bufferSource.buffer=a._scratchBuffer}catch{}}return e.bufferSource=null,this},_clearSound:function(e){e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"}};var y=function(e){this._parent=e,this.init()};y.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,t._sounds.push(e),t._soundMap.set(e._id,e),e.create(),e},create:function(){var e=this,t=e._parent,n=a._muted||e._muted||t._muted?0:e._volume;return t._webAudio?(e._node=a.ctx.createGain(),e._node.gain.setValueAtTime(n,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):a.noAudio||(e._node=a._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=t._preload===!0?"auto":t._preload,e._node.volume=n*a.volume(),t._stream&&(e._node.crossOrigin=t._xhr.withCredentials?"use-credentials":"anonymous"),e._node.load(),t._stream&&(t._attachStreamNodeListeners(e._node),P(t,e._node))),e},reset:function(){var e=this,t=e._parent;e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default";var n=e._id;return e._id=++a._counter,t._soundMap.delete(n),t._soundMap.set(e._id,e),e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(e._node.duration*10)/10,Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(e._node.duration*10)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=t._duration*1e3),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};function A(e){var t=e._src,n=_(t);if(n){e._duration=n.duration,F(e);return}if(/^data:[^;]+;base64,/.test(t)){var r=t.split(",")[1],o=atob(r),i=Uint8Array.from(o,function(c){return c.charCodeAt(0)});M(i.buffer,e);return}var s={method:e._xhr.method,credentials:e._xhr.withCredentials?"include":"same-origin"};if(e._xhr.headers)try{s.headers=new Headers(e._xhr.headers)}catch(c){console.warn("Howler: Invalid XHR headers - ignoring.",c)}var d=new AbortController;s.signal=d.signal,e._fetchControllers[t]=d,fetch(t,s).then(function(c){if(c.status<200||c.status>=400)throw new Error("HTTP "+c.status);return c.arrayBuffer()}).then(function(c){delete e._fetchControllers[t],M(c,e)}).catch(function(c){delete e._fetchControllers[t],c.name!=="AbortError"&&(e._webAudio=!1,e._html5=!0,e._sounds=[],v(t),e.load())})}function M(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(o){o&&t._sounds.length>0?(u(t._src,o),F(t,o)):n()};a.ctx.decodeAudioData(e).then(r).catch(n)}function F(e,t){t&&!e._duration&&(e._duration=t.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())}function x(){if(a.usingWebAudio){try{typeof AudioContext<"u"?a.ctx=new AudioContext({latencyHint:"playback"}):a.usingWebAudio=!1}catch{a.usingWebAudio=!1}if(!a.ctx){a.usingWebAudio=!1;return}a.masterGain=a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination),a._setup()}}function R(e){if(!(typeof navigator>"u"||!("mediaSession"in navigator))){var t=e._stream,n=function(r,o){try{navigator.mediaSession.setActionHandler(r,o)}catch{}};n("play",function(){e.play()}),n("pause",function(){e.pause()}),n("stop",function(){e.stop()}),n("seekto",function(r){r&&r.fastSeek||e.playing()&&e._streamSilentReconnect(!1)}),n("previoustrack",t.onPreviousTrack||null),n("nexttrack",t.onNextTrack||null)}}function L(e,t,n,r,o,i){if(e._rampInterval&&(clearInterval(e._rampInterval),e._rampInterval=null),!isFinite(n)||!isFinite(r)){t.volume=isFinite(r)?Math.max(0,Math.min(1,r)):0,i&&i();return}var s=8,d=(r-n)/s,c=o/s,h=0;e._rampInterval=setInterval(function(){h++,t.volume=Math.max(0,Math.min(1,n+d*h)),h>=s&&(clearInterval(e._rampInterval),e._rampInterval=null,t.volume=r,i&&i())},c)}function P(e,t){var n=e._stream;if(!(!n||!n.workletUrl)&&!(!a.ctx||!a.ctx.audioWorklet)){var r=String(n.workletUrl);if(!/^https:\/\//i.test(r)&&!/^blob:/i.test(r)){console.warn("Howler [stream]: workletUrl rejected \u2014 only https: and blob: schemes are allowed. Received: "+r);return}a.ctx.audioWorklet.addModule(n.workletUrl).then(function(){if(e._stream){var o=a.ctx.createMediaElementSource(t),i=new AudioWorkletNode(a.ctx,"howler-stream-processor");n.onWorkletMessage&&(i.port.onmessage=n.onWorkletMessage),o.connect(i),i.connect(a.masterGain),n._workletSource=o,n._workletNode=i}}).catch(function(o){console.warn("Howler [stream]: AudioWorklet module failed to load \u2014 falling back to direct HTML5 Audio. Error:",o)})}}typeof define=="function"&&define.amd&&define([],function(){return{Howler:a,Howl:p}}),typeof exports<"u"&&(exports.Howler=a,exports.Howl=p),typeof global<"u"?(global.HowlerGlobal=m,global.Howler=a,global.Howl=p,global.Sound=y):typeof window<"u"&&(window.HowlerGlobal=m,window.Howler=a,window.Howl=p,window.Sound=y),typeof navigator<"u"&&navigator.mediaDevices&&typeof navigator.mediaDevices.addEventListener=="function"&&navigator.mediaDevices.addEventListener("devicechange",function(){a.autoReroute&&(!a.ctx||typeof a.ctx.setSinkId!="function"||navigator.mediaDevices.enumerateDevices().then(function(e){var t=a._sinkId||"";if(t!==""){var n=e.some(function(r){return r.kind==="audiooutput"&&r.deviceId===t});n||a.setSinkId("").then(function(){console.info("Howler [autoReroute]: active output device removed; rerouted to system default.")}).catch(function(r){console.warn("Howler [autoReroute]: setSinkId('') failed:",r)})}}).catch(function(){}))})})(),(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(l){var u=this;if(!u.ctx||!u.ctx.listener)return u;for(var _=u._howls.length-1;_>=0;_--)u._howls[_].stereo(l);return u},HowlerGlobal.prototype.pos=function(l,u,_){var v=this;return!v.ctx||!v.ctx.listener?v:(u=typeof u!="number"?v._pos[1]:u,_=typeof _!="number"?v._pos[2]:_,typeof l!="number"?v._pos:(v._pos=[l,u,_],typeof v.ctx.listener.positionX<"u"?(v.ctx.listener.positionX.setTargetAtTime(l,Howler.ctx.currentTime,.1),v.ctx.listener.positionY.setTargetAtTime(u,Howler.ctx.currentTime,.1),v.ctx.listener.positionZ.setTargetAtTime(_,Howler.ctx.currentTime,.1)):v.ctx.listener.setPosition(l,u,_),v))},HowlerGlobal.prototype.orientation=function(l,u,_,v,f,m){var a=this;if(!a.ctx||!a.ctx.listener)return a;var p=a._orientation;return u=typeof u!="number"?p[1]:u,_=typeof _!="number"?p[2]:_,v=typeof v!="number"?p[3]:v,f=typeof f!="number"?p[4]:f,m=typeof m!="number"?p[5]:m,typeof l!="number"?p:(a._orientation=[l,u,_,v,f,m],typeof a.ctx.listener.forwardX<"u"?(a.ctx.listener.forwardX.setTargetAtTime(l,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(u,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(_,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(v,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(f,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(m,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(l,u,_,v,f,m),a)},Howl.prototype.init=(function(l){return function(u){var _=this;return _._orientation=u.orientation||[1,0,0],_._stereo=u.stereo||null,_._pos=u.pos||null,_._pannerAttr={coneInnerAngle:u.coneInnerAngle!==void 0?u.coneInnerAngle:360,coneOuterAngle:u.coneOuterAngle!==void 0?u.coneOuterAngle:360,coneOuterGain:u.coneOuterGain!==void 0?u.coneOuterGain:0,distanceModel:u.distanceModel!==void 0?u.distanceModel:"inverse",maxDistance:u.maxDistance!==void 0?u.maxDistance:1e4,panningModel:u.panningModel!==void 0?u.panningModel:"HRTF",refDistance:u.refDistance!==void 0?u.refDistance:1,rolloffFactor:u.rolloffFactor!==void 0?u.rolloffFactor:1},_._onstereo=u.onstereo?[{fn:u.onstereo}]:[],_._onpos=u.onpos?[{fn:u.onpos}]:[],_._onorientation=u.onorientation?[{fn:u.onorientation}]:[],l.call(_,u)}})(Howl.prototype.init),Howl.prototype.stereo=function(l,u){var _=this;if(!_._webAudio)return _;if(_._state!=="loaded")return _._queue.push({event:"stereo",action:function(){_.stereo(l,u)}}),_;var v=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof u>"u"){if(typeof l!="number")return _._stereo;_._stereo=l,_._pos=[l,0,0]}for(var f=_._getSoundIds(u),m=0;m<f.length;m++){var a=_._soundById(f[m]);if(a){if(typeof l!="number")return a._stereo;a._stereo=l,a._pos=[l,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",(!a._panner||a._panner.pan)&&k(a,v),v==="spatial"?typeof a._panner.positionX<"u"?(a._panner.positionX.setValueAtTime(l,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(l,0,0):a._panner.pan.setValueAtTime(l,Howler.ctx.currentTime)),_._emit("stereo",a._id)}}return _},Howl.prototype.pos=function(l,u,_,v){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"pos",action:function(){f.pos(l,u,_,v)}}),f;if(u=typeof u!="number"?0:u,_=typeof _!="number"?-.5:_,typeof v>"u"){if(typeof l!="number")return f._pos;f._pos=[l,u,_]}for(var m=f._getSoundIds(v),a=0;a<m.length;a++){var p=f._soundById(m[a]);if(p){if(typeof l!="number")return p._pos;p._pos=[l,u,_],p._node&&((!p._panner||p._panner.pan)&&k(p,"spatial"),typeof p._panner.positionX<"u"?(p._panner.positionX.setValueAtTime(l,Howler.ctx.currentTime),p._panner.positionY.setValueAtTime(u,Howler.ctx.currentTime),p._panner.positionZ.setValueAtTime(_,Howler.ctx.currentTime)):p._panner.setPosition(l,u,_)),f._emit("pos",p._id)}}return f},Howl.prototype.orientation=function(l,u,_,v){var f=this;if(!f._webAudio)return f;if(f._state!=="loaded")return f._queue.push({event:"orientation",action:function(){f.orientation(l,u,_,v)}}),f;if(u=typeof u!="number"?f._orientation[1]:u,_=typeof _!="number"?f._orientation[2]:_,typeof v>"u"){if(typeof l!="number")return f._orientation;f._orientation=[l,u,_]}for(var m=f._getSoundIds(v),a=0;a<m.length;a++){var p=f._soundById(m[a]);if(p){if(typeof l!="number")return p._orientation;p._orientation=[l,u,_],p._node&&(p._panner||(p._pos||(p._pos=f._pos||[0,0,-.5]),k(p,"spatial")),typeof p._panner.orientationX<"u"?(p._panner.orientationX.setValueAtTime(l,Howler.ctx.currentTime),p._panner.orientationY.setValueAtTime(u,Howler.ctx.currentTime),p._panner.orientationZ.setValueAtTime(_,Howler.ctx.currentTime)):p._panner.setOrientation(l,u,_)),f._emit("orientation",p._id)}}return f},Howl.prototype.pannerAttr=function(){var l=this,u=arguments,_,v,f;if(!l._webAudio)return l;if(u.length===0)return l._pannerAttr;if(u.length===1)if(typeof u[0]=="object"){_=u[0],_.pannerAttr||(_.pannerAttr={coneInnerAngle:_.coneInnerAngle,coneOuterAngle:_.coneOuterAngle,coneOuterGain:_.coneOuterGain,distanceModel:_.distanceModel,maxDistance:_.maxDistance,refDistance:_.refDistance,rolloffFactor:_.rolloffFactor,panningModel:_.panningModel});var m=_.pannerAttr;l._pannerAttr={coneInnerAngle:m.coneInnerAngle!==void 0?m.coneInnerAngle:l._pannerAttr.coneInnerAngle,coneOuterAngle:m.coneOuterAngle!==void 0?m.coneOuterAngle:l._pannerAttr.coneOuterAngle,coneOuterGain:m.coneOuterGain!==void 0?m.coneOuterGain:l._pannerAttr.coneOuterGain,distanceModel:m.distanceModel!==void 0?m.distanceModel:l._pannerAttr.distanceModel,maxDistance:m.maxDistance!==void 0?m.maxDistance:l._pannerAttr.maxDistance,refDistance:m.refDistance!==void 0?m.refDistance:l._pannerAttr.refDistance,rolloffFactor:m.rolloffFactor!==void 0?m.rolloffFactor:l._pannerAttr.rolloffFactor,panningModel:m.panningModel!==void 0?m.panningModel:l._pannerAttr.panningModel}}else return f=l._soundById(parseInt(u[0],10)),f?f._pannerAttr:l._pannerAttr;else u.length===2&&(_=u[0],v=parseInt(u[1],10));for(var a=l._getSoundIds(v),p=0;p<a.length;p++)if(f=l._soundById(a[p]),!!f){var y=f._pannerAttr;y={coneInnerAngle:_.coneInnerAngle!==void 0?_.coneInnerAngle:y.coneInnerAngle,coneOuterAngle:_.coneOuterAngle!==void 0?_.coneOuterAngle:y.coneOuterAngle,coneOuterGain:_.coneOuterGain!==void 0?_.coneOuterGain:y.coneOuterGain,distanceModel:_.distanceModel!==void 0?_.distanceModel:y.distanceModel,maxDistance:_.maxDistance!==void 0?_.maxDistance:y.maxDistance,refDistance:_.refDistance!==void 0?_.refDistance:y.refDistance,rolloffFactor:_.rolloffFactor!==void 0?_.rolloffFactor:y.rolloffFactor,panningModel:_.panningModel!==void 0?_.panningModel:y.panningModel};var A=f._panner;A||(f._pos||(f._pos=l._pos||[0,0,-.5]),k(f,"spatial"),A=f._panner),A.coneInnerAngle=y.coneInnerAngle,A.coneOuterAngle=y.coneOuterAngle,A.coneOuterGain=y.coneOuterGain,A.distanceModel=y.distanceModel,A.maxDistance=y.maxDistance,A.refDistance=y.refDistance,A.rolloffFactor=y.rolloffFactor,A.panningModel=y.panningModel}return l},Sound.prototype.init=(function(l){return function(){var u=this,_=u._parent;u._orientation=_._orientation,u._stereo=_._stereo,u._pos=_._pos,u._pannerAttr=_._pannerAttr,l.call(u),u._stereo?_.stereo(u._stereo):u._pos&&_.pos(u._pos[0],u._pos[1],u._pos[2],u._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(l){return function(){var u=this,_=u._parent;return u._orientation=_._orientation,u._stereo=_._stereo,u._pos=_._pos,u._pannerAttr=_._pannerAttr,u._stereo?_.stereo(u._stereo):u._pos?_.pos(u._pos[0],u._pos[1],u._pos[2],u._id):u._panner&&(u._panner.disconnect(0),u._panner=void 0,_._refreshBuffer(u)),l.call(u)}})(Sound.prototype.reset);function k(l,u){u=u||"spatial",u==="spatial"?(l._panner=Howler.ctx.createPanner(),l._panner.coneInnerAngle=l._pannerAttr.coneInnerAngle,l._panner.coneOuterAngle=l._pannerAttr.coneOuterAngle,l._panner.coneOuterGain=l._pannerAttr.coneOuterGain,l._panner.distanceModel=l._pannerAttr.distanceModel,l._panner.maxDistance=l._pannerAttr.maxDistance,l._panner.refDistance=l._pannerAttr.refDistance,l._panner.rolloffFactor=l._pannerAttr.rolloffFactor,l._panner.panningModel=l._pannerAttr.panningModel,typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(l._pos[0],Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(l._pos[1],Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(l._pos[2],Howler.ctx.currentTime)):l._panner.setPosition(l._pos[0],l._pos[1],l._pos[2]),typeof l._panner.orientationX<"u"?(l._panner.orientationX.setValueAtTime(l._orientation[0],Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(l._orientation[1],Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(l._orientation[2],Howler.ctx.currentTime)):l._panner.setOrientation(l._orientation[0],l._orientation[1],l._orientation[2])):(l._panner=Howler.ctx.createStereoPanner(),l._panner.pan.setValueAtTime(l._stereo,Howler.ctx.currentTime)),l._panner.connect(l._node),l._paused||l._parent.pause(l._id,!0).play(l._id,!0)}})();
